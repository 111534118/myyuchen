
# 系統設計書 (SD.md) – 遊戲攻略靜態原型

### 1. 資料庫（ERD / Table）

**目的：** 定義系統所需的所有資料儲存結構。

**設計：**

根據 REQ 和 SA 的架構約束，本專案為**純靜態網站原型**，不包含後端資料庫。因此，本章節不適用（N/A），**無需**設計任何資料表（Entity），且不使用 `/db/schema.sql` 檔案。

| 資料表 | 欄位名稱 | 型態 | 說明 | 關聯 |
| :--- | :--- | :--- | :--- | :--- |
| N/A | N/A | N/A | N/A | N/A |

### 2. API 設計

**目的：** 定義前後端資料交換的所有介面。

**設計：**

本系統無後端邏輯，所有互動皆在客戶端（瀏覽器）以 **Vanilla JavaScript** 處理。因此，**本系統不提供任何 RESTful API 服務**，此章節不適用（N/A），且不會在 Spring Boot 中定義任何 `@GetMapping` 或 `@PostMapping` 的 API 方法。

| API | Method | URL | Request | Response |
| :--- | :--- | :--- | :--- | :--- |
| N/A | N/A | N/A | N/A | N/A |

### 3. 主要流程 (Sequence)

**目的：** 描述關鍵使用者情境的執行順序。本設計納入兩個核心流程，涵蓋 REQ 的所有 MVP 功能。

#### 流程一：情境二：迷路的探索者在地圖上查看靜態資訊（MVP 1）

| 參與者 | 步驟 | 說明 (流程細節) |
| :--- | :--- | :--- |
| **使用者行為** | 1. 導覽至地圖頁面 | 點擊導覽列上的「地圖」連結，進入 `map.html`。 |
| **前端行為** | 2. 頁面載入與資源準備 | 瀏覽器載入 `map.html` 和 `/static/js/map.js`，**並確保地圖圖片與 JS 硬編碼數據已載入**。 |
| **使用者行為** | 3. 點擊預設圖標 | 使用者點擊地圖上 **2-3 個預先設定好**的圖標。 |
| **前端行為** | 4. 事件觸發與舊框檢查 | 點擊事件觸發 `map.js` 處理器，**若有先前開啟的提示框，則先關閉**。 |
| **前端行為** | 5. 座標判斷與資訊讀取 | JS 判斷座標是否命中圖標感應區；若命中，則從硬編碼資料中讀取對應的提示文字。 |
| **前端行為** | 6. 顯示自定義 Modal 框 | **使用自定義 CSS Modal 框** 顯示提示文字（避免使用瀏覽器內建 `alert()`）。 |
| **使用者行為** | 7. 關閉提示框 | 使用者完成瀏覽後，點擊 Modal 框的關閉按鈕。 |

#### 流程二：基礎頁面導覽切換流程（MVP 3）

| 參與者 | 步驟 | 說明 (流程細節) |
| :--- | :--- | :--- |
| **使用者行為** | 1. 點擊導覽列連結 | 在 `map.html` 頁面點擊導覽列上的「攻略」連結。 |
| **前端行為** | 2. 瀏覽器發出請求 | 瀏覽器發出 GET `/guide.html` 請求。 |
| **前端行為** | 3. Web Server 回應 | Spring Boot 容器回傳 `guide.html` 的靜態內容。 |
| **前端行為** | 4. 渲染新頁面 | 瀏覽器載入並渲染 `guide.html`，顯示靜態圖文攻略。 |

### 4. Main Flow 詳細描述

**目的：** 將地圖點擊流程（流程一）細化成 7–12 個具體步驟,。

| 步驟編號 | 使用者行為 | 前端行為 (HTML/JS) | 後端邏輯 | 資料庫變化 |
| :--- | :--- | :--- | :--- | :--- |
| **1** | N/A | 瀏覽器載入 `map.html`。 | N/A | N/A |
| **2** | N/A | `map.js` 讀取硬編碼的點位座標與提示文字（e.g., JSON 物件）。 | N/A | N/A |
| **3** | 點擊地圖上任一座標 (X, Y) | 瀏覽器捕捉 `click` 事件。 | N/A | N/A |
| **4** | N/A | JS 判斷點擊座標是否命中 **2-3 個圖標**的感應區；若未命中，則流程結束 (return)。 | N/A | N/A |
| **5** | N/A | JS 檢查是否有開啟中的 Modal，若有則隱藏舊 Modal。 | N/A | N/A |
| **6** | N/A | JS 執行 `showCustomModal(info_text)` 函數，將靜態文字內容插入 Modal DOM 結構並顯示。 | N/A | N/A |
| **7** | 點擊關閉按鈕 | JS 捕捉關閉事件，隱藏 Modal。 | N/A | N/A |

### 5. 畫面元件設計

**目的：** 定義前台所需的所有 UI 元件，並明確指出靜態性質與約束條件。

#### 5.1 簡化版互動地圖頁面 (`map.html`)

| 元件名稱 | 類型 | 內容或用途 | 備註（設計約束） |
| :--- | :--- | :--- | :--- |
| **頂部導覽列** | 連結 | 導引至 `guide.html` 與 `map.html`。 | **必須優先設計桌面瀏覽器佈局** (RWD 優先級)。 |
| **地圖圖片** | 靜態 `<img>` | 固定的初始區域地圖圖片。 | 不支援縮放、平移。 |
| **點擊圖標** | 靜態 `<div>` | 2-3 個預設且**硬編碼座標**的圖標。 | **數量必須符合 REQ 限制**（2-3 個）。 |
| **提示彈窗 (Modal)** | 自定義 `<div>` | 點擊圖標後彈出的純文字提示框。 | 採用 **CSS Modal** 實作，而非瀏覽器 `alert()`。 |

#### 5.2 靜態圖文攻略頁面 (`guide.html`)

| 元件名稱 | 類型 | 內容或用途 | 備註（設計約束） |
| :--- | :--- | :--- | :--- |
| **頂部導覽列** | 連結 | 導引功能。 | **必須優先設計桌面瀏覽器佈局**。 |
| **文字內容** | `<div>` / `<p>` | 寫死的任務流程說明文字。 | 靜態 HTML 內容。 |
| **靜態圖片** | `<img>` | 至少 1 張圖片，輔助說明攻略內容。 | 靜態資源。 |

---

### 🏁 最終確認：SD 驗證

這份修正後的 SD 文件，已成功解決了所有一致性問題，特別是：

1.  **結構排除：** 資料庫和 API 章節明確排除（與 REQ/SA 一致）。
2.  **流程完整：** 新增了導覽流程，並細化了地圖點擊流程（滿足 E.10, E.11，涵蓋所有 MVP）。
3.  **細節精確：** UI 元件設計中，已納入 REQ 對**數量 (2-3 點)** 和**RWD (桌面優先)** 的約束。

現在，您的文件已準備好進行 **F. 程式實作檢查**。您應將此 SD 丟給 **Gemini CLI** 試跑生成程式碼，以確認它不會生成不必要的後端元件，並能指導前端靜態頁面的創建,。

這個過程就像是**精確校準儀器**：透過 REQ、SA 的約束和 NotebookLM 的檢查，我們確保了這份 SD 流程和元件規格的每一個參數，都能被 AI 建築工（Gemini CLI）**零歧義地**轉換為程式碼骨架,。